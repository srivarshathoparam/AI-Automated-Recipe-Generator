<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caesar Salad Recipe</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/rb.css') }}">
</head>
<body>
    <header>
        <h1>Caesar Salad Recipe</h1>
        <nav>
            <a href="{{ url_for('recipe_routes.homepage') }}">Home</a>
            <a href="{{ url_for('recipe_routes.recipes') }}">Recipes</a>
        </nav>
    </header>

    <main>
        <section class="recipe-details">
            <img src="{{ url_for('static', filename='images/CaesarSalad.jpg') }}" alt="Caesar Salad">
            <div class="feedback-section">
                <div class="likes">
                    <button class="like-btn" id="like-btn">
                        <span id="like-count">9</span> Likes
                    </button>
                </div>
                <div class="reviews">
                    <div class="average-rating">
                        <span>Average Rating: </span>
                        <span id="stars"></span>
                    </div>
                    <div id="review-count">Based on 7 reviews</div>
                </div>
            </div>

            <h2>Caesar Salad</h2>
            <p>Classic Caesar salad featuring crisp romaine lettuce, crunchy croutons, and a tangy homemade dressing. Optionally topped with grilled chicken or anchovies.</p>

            <h3>Ingredients</h3>
            <ul>
                <li>1 large romaine lettuce</li>
                <li>1/2 cup croutons</li>
                <li>1/4 cup grated Parmesan cheese</li>
                <li>1 egg yolk</li>
                <li>2 anchovy fillets (optional)</li>
                <li>1 garlic clove</li>
                <li>1 tsp Dijon mustard</li>
                <li>2 tbsp lemon juice</li>
                <li>1/3 cup olive oil</li>
                <li>Salt and pepper to taste</li>
            </ul>

            <h3>Instructions</h3>
            <ol>
                <li>Make dressing: mash garlic and anchovies into a paste, whisk with egg yolk, mustard, lemon juice, salt, and pepper.</li>
                <li>Slowly whisk in olive oil to emulsify.</li>
                <li>Toss chopped lettuce with croutons and dressing. Top with Parmesan.</li>
                <li>Optional: Add grilled chicken or extra anchovies for protein.</li>
            </ol>

            <h3>Tips</h3>
            <p>Use fresh, crisp romaine and homemade croutons for best results. Refrigerate dressing for up to 3 days.</p>

            <a href="{{ url_for('recipe_routes.recipes') }}">
                <button class="back-btn">Back to Recipes</button>
            </a>
        </section>

        <section class="recipe-feedback">
            <div class="comments">
                <h3>Comments</h3>
                <div id="comment-section">
                    <div class="comment-item"><strong>John</strong>: "Simple, fresh, and flavorful!"</div>
                    <div class="comment-item"><strong>Sara</strong>: "I skipped the anchovies and still loved it."</div>
                </div>
                <div class="comment-input">
                    <h4>Leave a Comment</h4>
                    <textarea id="comment-text" placeholder="Write your comment here..."></textarea>
                    <button class="comment-btn" id="submit-comment">Submit Comment</button>
                </div>
            </div>
        </section>
    </main>

    <footer><p>&copy; 2024 My Recipe Book</p></footer>

    <script src="rb.js"></script>
    <script>
        document.getElementById('like-btn').addEventListener('click', () => {
            const likeCount = document.getElementById('like-count');
            likeCount.innerText = parseInt(likeCount.innerText) + 1;
        });

        document.getElementById('submit-comment').addEventListener('click', () => {
            const text = document.getElementById('comment-text').value;
            if (text.trim()) {
                const newComment = document.createElement('div');
                newComment.classList.add('comment-item');
                newComment.innerHTML = `<strong>You</strong>: ${text}`;
                document.getElementById('comment-section').appendChild(newComment);
                document.getElementById('comment-text').value = '';
            }
        });

        const totalRating = 30;
        const totalReviews = 7;

        function calculateRating(rating, totalReviews) {
            const averageRating = rating / totalReviews;
            const stars = document.getElementById('stars');
            stars.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const star = document.createElement('span');
                star.textContent = i <= Math.floor(averageRating) ? '★' : '☆';
                stars.appendChild(star);
            }
        }

        calculateRating(totalRating, totalReviews);
    </script>
</body>
</html>
